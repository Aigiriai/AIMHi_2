🔐 AUTH[zvwtsfrqj]: ============= AUTHENTICATION SUCCESS =============
🔄 MANUAL BACKUP: User superadmin@aimhi.app (super_admin) requested manual database backup
📊 MANUAL BACKUP: NODE_ENV = development
🏢 MANUAL BACKUP: Organization ID = 1
🚨 Manual backup triggered (any environment): manual_trigger_from_api
🔍 BACKUP: Organizations in database: AIM Hi System (aimhi.app)
✅ BACKUP VALIDATION: Database schema is complete, proceeding with backup
🔄 BACKUP: Creating backup from development.db database...
📁 BACKUP: Source: /home/runner/workspace/data/development.db
📁 BACKUP: Target: /home/runner/workspace/backups/dev/backup.db
🔄 BACKUP: Forcing SQLite checkpoint before backup creation
🔍 BACKUP VERIFY: Organizations after checkpoint: AIM Hi System (aimhi.app)
☁️ Uploading database backup: database-backups/dev/development-backup-2025-08-21T11-46-17-317Z.db (148KB)
✅ Database backup uploaded successfully: database-backups/dev/development-backup-2025-08-21T11-46-17-317Z.db
🔍 BACKUP VERIFY: Downloading backup to verify content...
❌ Failed to download database backup: TypeError: this.getClient is not a function
    at DatabaseBackupService.downloadDatabaseBackup (/home/runner/workspace/server/objectStorage.ts:257:27)
    at DatabaseBackupService.verifyBackupContent (/home/runner/workspace/server/objectStorage.ts:126:37)
    at DatabaseBackupService.createTimestampedBackup (/home/runner/workspace/server/objectStorage.ts:439:14)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async DataPersistenceManager.createBackup (/home/runner/workspace/server/data-persistence.ts:94:33)
    at async BackupIntegrationService.forceBackupAnyEnvironment (/home/runner/workspace/server/backup-integration.ts:231:26)
    at async <anonymous> (/home/runner/workspace/server/auth-routes.ts:1200:21)
❌ Error during backup verification: ObjectStorageDownloadError: Failed to download database backup 'database-backups/dev/development-backup-2025-08-21T11-46-17-317Z.db': this.getClient is not a function
    at DatabaseBackupService.downloadDatabaseBackup (/home/runner/workspace/server/objectStorage.ts:303:13)
    at DatabaseBackupService.verifyBackupContent (/home/runner/workspace/server/objectStorage.ts:126:37)
    at DatabaseBackupService.createTimestampedBackup (/home/runner/workspace/server/objectStorage.ts:439:14)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async DataPersistenceManager.createBackup (/home/runner/workspace/server/data-persistence.ts:94:33)
    at async BackupIntegrationService.forceBackupAnyEnvironment (/home/runner/workspace/server/backup-integration.ts:231:26)
    at async <anonymous> (/home/runner/workspace/server/auth-routes.ts:1200:21) {
  originalError: TypeError: this.getClient is not a function
      at DatabaseBackupService.downloadDatabaseBackup (/home/runner/workspace/server/objectStorage.ts:257:27)
      at DatabaseBackupService.verifyBackupContent (/home/runner/workspace/server/objectStorage.ts:126:37)
      at DatabaseBackupService.createTimestampedBackup (/home/runner/workspace/server/objectStorage.ts:439:14)
      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
      at async DataPersistenceManager.createBackup (/home/runner/workspace/server/data-persistence.ts:94:33)
      at async BackupIntegrationService.forceBackupAnyEnvironment (/home/runner/workspace/server/backup-integration.ts:231:26)
      at async <anonymous> (/home/runner/workspace/server/auth-routes.ts:1200:21)
}
✅ Database backup created in Object Storage: development-backup-2025-08-21T11-46-17-317Z.db
✅ Local backup copy created: /home/runner/workspace/backups/dev/backup.db
✅ Manual backup completed: development-backup-2025-08-21T11-46-17-317Z.db